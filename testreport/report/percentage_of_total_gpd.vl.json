{"transform": [{"frame": [null, null], "window": [{"op": "sum", "field": "Time", "as": "TotalTime"}]}, {"calculate": "datum.Time / datum.TotalTime", "as": "PercentOfTotal"}], "encoding": {"y": {"title": "Activity", "field": "properties.Activity", "type": "nominal"}, "x": {"field": "PercentOfTotal", "type": "quantitative", "axis": {"format": ".0%"}}}, "data": {"values": {"features": [{"properties": {"Time": 8, "Activity": "Sleeping"}, "geometry": {"coordinates": [125.6, 10.1], "type": "Point"}, "type": "Feature"}, {"properties": {"Time": 2, "Activity": "Eating"}, "geometry": {"coordinates": [125.6, 10.1], "type": "Point"}, "type": "Feature"}, {"properties": {"Time": 4, "Activity": "TV"}, "geometry": {"coordinates": [125.6, 10.1], "type": "Point"}, "type": "Feature"}, {"properties": {"Time": 8, "Activity": "Work"}, "geometry": {"coordinates": [125.6, 10.1], "type": "Point"}, "type": "Feature"}, {"properties": {"Time": 2, "Activity": "Exercise"}, "geometry": {"coordinates": [125.6, 10.1], "type": "Point"}, "type": "Feature"}], "type": "FeatureCollection"}, "format": {"type": "json", "property": "features"}}, "$schema": "https://vega.github.io/schema/vega-lite/v2.4.1.json", "config": {"view": {"height": 300, "width": 400}}, "mark": "bar"}