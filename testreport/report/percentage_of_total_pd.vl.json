{"transform": [{"frame": [null, null], "window": [{"op": "sum", "field": "Time", "as": "TotalTime"}]}, {"calculate": "datum.Time / datum.TotalTime", "as": "PercentOfTotal"}], "encoding": {"y": {"field": "Activity", "type": "nominal"}, "x": {"field": "PercentOfTotal", "type": "quantitative", "axis": {"format": ".0%"}}}, "data": {"values": [{"Time": 8, "Activity": "Sleeping"}, {"Time": 2, "Activity": "Eating"}, {"Time": 4, "Activity": "TV"}, {"Time": 8, "Activity": "Work"}, {"Time": 2, "Activity": "Exercise"}]}, "$schema": "https://vega.github.io/schema/vega-lite/v2.4.1.json", "config": {"view": {"height": 300, "width": 400}}, "mark": "bar"}